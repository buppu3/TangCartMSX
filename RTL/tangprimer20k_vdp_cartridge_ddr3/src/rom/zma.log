Z80 Macro Assembler ZMA v1.0.18
=====================================================
Programmed by t.hara

  DEFS is DEFINE STRING (default).
  OUTPUT TYPE: BINARY

<< code >>
LINE# |OFFSET|ADDR|MNEMONIC
======+======+====+==================================
     7|      |    |UART := 0x10
      |      |    |  Global integer symbol [UART] = 16 (0x10)
------+------+----+----------------------------------
     8|      |    |DATA := 0x20
      |      |    |  Global integer symbol [DATA] = 32 (0x20)
------+------+----+----------------------------------
     9|      |    |BUSY_STATUS := 0x30
      |      |    |  Global integer symbol [BUSY_STATUS] = 48 (0x30)
------+------+----+----------------------------------
    10|      |    |BUSY_COUNT := 0x31
      |      |    |  Global integer symbol [BUSY_COUNT] = 49 (0x31)
------+------+----+----------------------------------
    11|      |    |DELAY_STATUS := 0x32
      |      |    |  Global integer symbol [DELAY_STATUS] = 50 (0x32)
------+------+----+----------------------------------
    12|      |    |DELAY_COUNT := 0x33
      |      |    |  Global integer symbol [DELAY_COUNT] = 51 (0x33)
------+------+----+----------------------------------
    13|      |    |MASK := 0x30
      |      |    |  Global integer symbol [MASK] = 48 (0x30)
------+------+----+----------------------------------
    14|      |    |ADDRESS := 0x32
      |      |    |  Global integer symbol [ADDRESS] = 50 (0x32)
------+------+----+----------------------------------
    15|      |    |WRITE_REQ := 0x36
      |      |    |  Global integer symbol [WRITE_REQ] = 54 (0x36)
------+------+----+----------------------------------
    16|      |    |READ_REQ := 0x37
      |      |    |  Global integer symbol [READ_REQ] = 55 (0x37)
------+------+----+----------------------------------
    18|      |    |ORG 0x0000
------+------+----+----------------------------------
    20|      |    |DI
      |      |    |  Z80:5cyc R800:2cyc
      |000000|0000|  F3
------+------+----+----------------------------------
    21|      |    |LD SP, 0x4000
      |      |    |  Z80:11cyc R800:3cyc
      |000001|0001|  31 00 40
------+------+----+----------------------------------
    23|      |    |CALL WAIT_KEY
      |      |    |  Z80:18cyc R800:5cyc
      |000004|0004|  CD 5C 00
------+------+----+----------------------------------
    26|      |    |START :
      |      |    |  label [START] address: 0x000007
------+------+----+----------------------------------
    27|      |    |LD DE, S_TITLE
      |      |    |  Z80:11cyc R800:3cyc
      |000007|0007|  11 27 00
------+------+----+----------------------------------
    28|      |    |CALL PUTS
      |      |    |  Z80:18cyc R800:5cyc
      |00000A|000A|  CD 6E 00
------+------+----+----------------------------------
    29|      |    |CALL WAIT_KEY
      |      |    |  Z80:18cyc R800:5cyc
      |00000D|000D|  CD 5C 00
------+------+----+----------------------------------
    31|      |    |JP START
      |      |    |  Z80:11cyc R800:5cyc
      |000010|0010|  C3 07 00
------+------+----+----------------------------------
    34|      |    |LD DE, S_BUSY_CHECK
      |      |    |  Z80:11cyc R800:3cyc
      |000013|0013|  11 41 00
------+------+----+----------------------------------
    35|      |    |CALL PUTS
      |      |    |  Z80:18cyc R800:5cyc
      |000016|0016|  CD 6E 00
------+------+----+----------------------------------
    36|      |    |BUSY_CHECK_LOOP :
      |      |    |  label [BUSY_CHECK_LOOP] address: 0x000019
------+------+----+----------------------------------
    37|      |    |IN A, [ BUSY_STATUS ]
      |      |    |  Z80:12cyc R800:10cyc/9cyc
      |000019|0019|  DB 30
------+------+----+----------------------------------
    38|      |    |OR A, A
      |      |    |  Z80:5cyc R800:1cyc
      |00001B|001B|  B7
------+------+----+----------------------------------
    39|      |    |JR NZ, BUSY_CHECK_LOOP
      |      |    |  Z80:13cyc/8cyc R800:3cyc/2cyc
      |00001C|001C|  20 FB
------+------+----+----------------------------------
    40|      |    |LD DE, S_OK
      |      |    |  Z80:11cyc R800:3cyc
      |00001E|001E|  11 57 00
------+------+----+----------------------------------
    41|      |    |CALL PUTS
      |      |    |  Z80:18cyc R800:5cyc
      |000021|0021|  CD 6E 00
------+------+----+----------------------------------
    42|      |    |JP START
      |      |    |  Z80:11cyc R800:5cyc
      |000024|0024|  C3 07 00
------+------+----+----------------------------------
    43|      |    |S_TITLE :
      |      |    |  label [S_TITLE] address: 0x000027
------+------+----+----------------------------------
    44|      |    |DB "DDR3-SDRAM Test program", 0x0D, 0x0A, 0
      |000027|0027|  44 44 52 33 2D 53 44 52
      |00002F|002F|  41 4D 20 54 65 73 74 20
      |000037|0037|  70 72 6F 67 72 61 6D 0D
      |00003F|003F|  0A 00
------+------+----+----------------------------------
    45|      |    |S_BUSY_CHECK :
      |      |    |  label [S_BUSY_CHECK] address: 0x000041
------+------+----+----------------------------------
    46|      |    |DB "SDRAM Busy Check ... ", 0
      |000041|0041|  53 44 52 41 4D 20 42 75
      |000049|0049|  73 79 20 43 68 65 63 6B
      |000051|0051|  20 2E 2E 2E 20 00
------+------+----+----------------------------------
    47|      |    |S_OK :
      |      |    |  label [S_OK] address: 0x000057
------+------+----+----------------------------------
    48|      |    |DB "OK", 0x0D, 0x0A, 0
      |000057|0057|  4F 4B 0D 0A 00
------+------+----+----------------------------------
    59|      |    |SCOPE WAIT_KEY
      |      |    |  Enter scope: WAIT_KEY:
------+------+----+----------------------------------
    60|      |    |WAIT_KEY ::
      |      |    |  global label [WAIT_KEY] address: 0x00005c
------+------+----+----------------------------------
    61|      |    |CALL GETKEY
      |      |    |  Z80:18cyc R800:5cyc
      |00005C|005C|  CD 6B 00
------+------+----+----------------------------------
    62|      |    |AND A, 1
      |      |    |  Z80:8cyc R800:2cyc
      |00005F|005F|  E6 01
------+------+----+----------------------------------
    63|      |    |JR NZ, WAIT_KEY
      |      |    |  Z80:13cyc/8cyc R800:3cyc/2cyc
      |000061|0061|  20 F9
------+------+----+----------------------------------
    64|      |    |_LOOP :
      |      |    |  label [WAIT_KEY:_LOOP] address: 0x000063
------+------+----+----------------------------------
    65|      |    |CALL GETKEY
      |      |    |  Z80:18cyc R800:5cyc
      |000063|0063|  CD 6B 00
------+------+----+----------------------------------
    66|      |    |AND A, 1
      |      |    |  Z80:8cyc R800:2cyc
      |000066|0066|  E6 01
------+------+----+----------------------------------
    67|      |    |JR Z, _LOOP
      |      |    |  Z80:13cyc/8cyc R800:3cyc/2cyc
      |000068|0068|  28 F9
------+------+----+----------------------------------
    68|      |    |RET
      |      |    |  Z80:11cyc R800:5cyc
      |00006A|006A|  C9
------+------+----+----------------------------------
    69|      |    |ENDSCOPE
      |      |    |  Exit scope: WAIT_KEY:
------+------+----+----------------------------------
    85|      |    |SCOPE GETKEY
      |      |    |  Enter scope: GETKEY:
------+------+----+----------------------------------
    86|      |    |GETKEY ::
      |      |    |  global label [GETKEY] address: 0x00006b
------+------+----+----------------------------------
    87|      |    |IN A, [ UART ]
      |      |    |  Z80:12cyc R800:10cyc/9cyc
      |00006B|006B|  DB 10
------+------+----+----------------------------------
    88|      |    |RET
      |      |    |  Z80:11cyc R800:5cyc
      |00006D|006D|  C9
------+------+----+----------------------------------
    89|      |    |ENDSCOPE
      |      |    |  Exit scope: GETKEY:
------+------+----+----------------------------------
   100|      |    |SCOPE PUTS
      |      |    |  Enter scope: PUTS:
------+------+----+----------------------------------
   101|      |    |PUTS ::
      |      |    |  global label [PUTS] address: 0x00006e
------+------+----+----------------------------------
   102|      |    |PUSH AF
      |      |    |  Z80:12cyc R800:6cyc
      |00006E|006E|  F5
------+------+----+----------------------------------
   103|      |    |LOOP :
      |      |    |  label [PUTS:LOOP] address: 0x00006f
------+------+----+----------------------------------
   104|      |    |LD A, [ DE ]
      |      |    |  Z80:8cyc R800:4cyc
      |00006F|006F|  1A
------+------+----+----------------------------------
   105|      |    |INC DE
      |      |    |  Z80:7cyc R800:1cyc
      |000070|0070|  13
------+------+----+----------------------------------
   106|      |    |OR A, A
      |      |    |  Z80:5cyc R800:1cyc
      |000071|0071|  B7
------+------+----+----------------------------------
   107|      |    |JR Z, EXIT
      |      |    |  Z80:13cyc/8cyc R800:3cyc/2cyc
      |000072|0072|  28 04
------+------+----+----------------------------------
   108|      |    |OUT [ UART ], A
      |      |    |  Z80:12cyc R800:10cyc/9cyc
      |000074|0074|  D3 10
------+------+----+----------------------------------
   109|      |    |JR LOOP
      |      |    |  Z80:13cyc R800:3cyc
      |000076|0076|  18 F7
------+------+----+----------------------------------
   110|      |    |EXIT :
      |      |    |  label [PUTS:EXIT] address: 0x000078
------+------+----+----------------------------------
   111|      |    |POP AF
      |      |    |  Z80:11cyc R800:5cyc
      |000078|0078|  F1
------+------+----+----------------------------------
   112|      |    |RET
      |      |    |  Z80:11cyc R800:5cyc
      |000079|0079|  C9
------+------+----+----------------------------------
   113|      |    |ENDSCOPE
      |      |    |  Exit scope: PUTS:
------+------+----+----------------------------------
<< label >>
ADDRESS ........... 50 ( 0x32 )
BUSY_CHECK_LOOP ... 25 ( 0x19 )
BUSY_COUNT ........ 49 ( 0x31 )
BUSY_STATUS ....... 48 ( 0x30 )
DATA .............. 32 ( 0x20 )
DELAY_COUNT ....... 51 ( 0x33 )
DELAY_STATUS ...... 50 ( 0x32 )
GETKEY ............ 107 ( 0x6b )
MASK .............. 48 ( 0x30 )
PUTS .............. 110 ( 0x6e )
PUTS:EXIT ......... 120 ( 0x78 )
PUTS:LOOP ......... 111 ( 0x6f )
READ_REQ .......... 55 ( 0x37 )
START ............. 7 ( 0x7 )
S_BUSY_CHECK ...... 65 ( 0x41 )
S_OK .............. 87 ( 0x57 )
S_TITLE ........... 39 ( 0x27 )
UART .............. 16 ( 0x10 )
WAIT_KEY .......... 92 ( 0x5c )
WAIT_KEY:_LOOP .... 99 ( 0x63 )
WRITE_REQ ......... 54 ( 0x36 )
