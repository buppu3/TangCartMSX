Z80 Macro Assembler ZMA v1.0.18
=====================================================
Programmed by t.hara

  DEFS is DEFINE STRING (default).
  OUTPUT TYPE: BINARY

<< code >>
LINE# |OFFSET|ADDR|MNEMONIC
======+======+====+==================================
     7|      |    |UART := 0x10
      |      |    |  Global integer symbol [UART] = 16 (0x10)
------+------+----+----------------------------------
     9|      |    |ORG 0x0000
------+------+----+----------------------------------
    11|      |    |DI
      |      |    |  Z80:5cyc R800:2cyc
      |000000|0000|  F3
------+------+----+----------------------------------
    12|      |    |LD SP, 0x8000
      |      |    |  Z80:11cyc R800:3cyc
      |000001|0001|  31 00 80
------+------+----+----------------------------------
    14|      |    |WAIT_KEY_RELEASE :
      |      |    |  label [WAIT_KEY_RELEASE] address: 0x000004
------+------+----+----------------------------------
    15|      |    |CALL GETKEY
      |      |    |  Z80:18cyc R800:5cyc
      |000004|0004|  CD 26 00
------+------+----+----------------------------------
    16|      |    |OR A, A
      |      |    |  Z80:5cyc R800:1cyc
      |000007|0007|  B7
------+------+----+----------------------------------
    17|      |    |JR NZ, WAIT_KEY_RELEASE
      |      |    |  Z80:13cyc/8cyc R800:3cyc/2cyc
      |000008|0008|  20 FA
------+------+----+----------------------------------
    19|      |    |MAIN_LOOP :
      |      |    |  label [MAIN_LOOP] address: 0x00000a
------+------+----+----------------------------------
    20|      |    |CALL GETKEY
      |      |    |  Z80:18cyc R800:5cyc
      |00000A|000A|  CD 26 00
------+------+----+----------------------------------
    21|      |    |OR A, A
      |      |    |  Z80:5cyc R800:1cyc
      |00000D|000D|  B7
------+------+----+----------------------------------
    22|      |    |JR Z, MAIN_LOOP
      |      |    |  Z80:13cyc/8cyc R800:3cyc/2cyc
      |00000E|000E|  28 FA
------+------+----+----------------------------------
    24|      |    |RRCA
      |      |    |  Z80:5cyc R800:1cyc
      |000010|0010|  0F
------+------+----+----------------------------------
    25|      |    |JR C, PUT_BUTTON0_MESSAGE
      |      |    |  Z80:13cyc/8cyc R800:3cyc/2cyc
      |000011|0011|  38 03
------+------+----+----------------------------------
    26|      |    |RRCA
      |      |    |  Z80:5cyc R800:1cyc
      |000013|0013|  0F
------+------+----+----------------------------------
    27|      |    |JR C, PUT_BUTTON1_MESSAGE
      |      |    |  Z80:13cyc/8cyc R800:3cyc/2cyc
      |000014|0014|  38 08
------+------+----+----------------------------------
    29|      |    |PUT_BUTTON0_MESSAGE :
      |      |    |  label [PUT_BUTTON0_MESSAGE] address: 0x000016
------+------+----+----------------------------------
    30|      |    |LD HL, S_BUTTON0_MESSAGE
      |      |    |  Z80:11cyc R800:3cyc
      |000016|0016|  21 3F 00
------+------+----+----------------------------------
    31|      |    |CALL PUTS
      |      |    |  Z80:18cyc R800:5cyc
      |000019|0019|  CD 36 00
------+------+----+----------------------------------
    32|      |    |JR WAIT_KEY_RELEASE
      |      |    |  Z80:13cyc R800:3cyc
      |00001C|001C|  18 E6
------+------+----+----------------------------------
    34|      |    |PUT_BUTTON1_MESSAGE :
      |      |    |  label [PUT_BUTTON1_MESSAGE] address: 0x00001e
------+------+----+----------------------------------
    35|      |    |LD HL, S_BUTTON1_MESSAGE
      |      |    |  Z80:11cyc R800:3cyc
      |00001E|001E|  21 5E 00
------+------+----+----------------------------------
    36|      |    |CALL PUTS
      |      |    |  Z80:18cyc R800:5cyc
      |000021|0021|  CD 36 00
------+------+----+----------------------------------
    37|      |    |JR WAIT_KEY_RELEASE
      |      |    |  Z80:13cyc R800:3cyc
      |000024|0024|  18 DE
------+------+----+----------------------------------
    50|      |    |SCOPE GETKEY
      |      |    |  Enter scope: GETKEY:
------+------+----+----------------------------------
    51|      |    |GETKEY ::
      |      |    |  global label [GETKEY] address: 0x000026
------+------+----+----------------------------------
    52|      |    |IN A, [ UART ]
      |      |    |  Z80:12cyc R800:10cyc/9cyc
      |000026|0026|  DB 10
------+------+----+----------------------------------
    53|      |    |RLCA
      |      |    |  Z80:5cyc R800:1cyc
      |000028|0028|  07
------+------+----+----------------------------------
    54|      |    |RLCA
      |      |    |  Z80:5cyc R800:1cyc
      |000029|0029|  07
------+------+----+----------------------------------
    55|      |    |RET
      |      |    |  Z80:11cyc R800:5cyc
      |00002A|002A|  C9
------+------+----+----------------------------------
    56|      |    |ENDSCOPE
      |      |    |  Exit scope: GETKEY:
------+------+----+----------------------------------
    67|      |    |SCOPE PUTC
      |      |    |  Enter scope: PUTC:
------+------+----+----------------------------------
    68|      |    |PUTC ::
      |      |    |  global label [PUTC] address: 0x00002b
------+------+----+----------------------------------
    69|      |    |LD C, UART
      |      |    |  Z80:8cyc R800:2cyc
      |00002B|002B|  0E 10
------+------+----+----------------------------------
    70|      |    |WAIT_LOOP :
      |      |    |  label [PUTC:WAIT_LOOP] address: 0x00002d
------+------+----+----------------------------------
    71|      |    |IN B, [ C ]
      |      |    |  Z80:14cyc R800:10cyc/9cyc
      |00002D|002D|  ED 40
------+------+----+----------------------------------
    72|      |    |RR B
      |      |    |  Z80:10cyc R800:2cyc
      |00002F|002F|  CB 18
------+------+----+----------------------------------
    73|      |    |JR C, WAIT_LOOP
      |      |    |  Z80:13cyc/8cyc R800:3cyc/2cyc
      |000031|0031|  38 FA
------+------+----+----------------------------------
    74|      |    |OUT [ C ], A
      |      |    |  Z80:14cyc R800:10cyc/9cyc
      |000033|0033|  ED 79
------+------+----+----------------------------------
    75|      |    |RET
      |      |    |  Z80:11cyc R800:5cyc
      |000035|0035|  C9
------+------+----+----------------------------------
    76|      |    |ENDSCOPE
      |      |    |  Exit scope: PUTC:
------+------+----+----------------------------------
    87|      |    |SCOPE PUTS
      |      |    |  Enter scope: PUTS:
------+------+----+----------------------------------
    88|      |    |PUTS ::
      |      |    |  global label [PUTS] address: 0x000036
------+------+----+----------------------------------
    89|      |    |LD A, [ HL ]
      |      |    |  Z80:8cyc R800:4cyc
      |000036|0036|  7E
------+------+----+----------------------------------
    90|      |    |INC HL
      |      |    |  Z80:7cyc R800:1cyc
      |000037|0037|  23
------+------+----+----------------------------------
    91|      |    |OR A, A
      |      |    |  Z80:5cyc R800:1cyc
      |000038|0038|  B7
------+------+----+----------------------------------
    92|      |    |RET Z
      |      |    |  Z80:12cyc/6cyc R800:5cyc/1cyc
      |000039|0039|  C8
------+------+----+----------------------------------
    93|      |    |CALL PUTC
      |      |    |  Z80:18cyc R800:5cyc
      |00003A|003A|  CD 2B 00
------+------+----+----------------------------------
    94|      |    |JR PUTS
      |      |    |  Z80:13cyc R800:3cyc
      |00003D|003D|  18 F7
------+------+----+----------------------------------
    95|      |    |ENDSCOPE
      |      |    |  Exit scope: PUTS:
------+------+----+----------------------------------
   100|      |    |S_BUTTON0_MESSAGE ::
      |      |    |  global label [S_BUTTON0_MESSAGE] address: 0x00003f
------+------+----+----------------------------------
   101|      |    |DS "Pressed BUTTON0!! Thank you!"
      |00003F|003F|  50 72 65 73 73 65 64 20
      |000047|0047|  42 55 54 54 4F 4E 30 21
      |00004F|004F|  21 20 54 68 61 6E 6B 20
      |000057|0057|  79 6F 75 21
------+------+----+----------------------------------
   102|      |    |DB 0x0D, 0x0A, 0
      |00005B|005B|  0D 0A 00
------+------+----+----------------------------------
   104|      |    |S_BUTTON1_MESSAGE ::
      |      |    |  global label [S_BUTTON1_MESSAGE] address: 0x00005e
------+------+----+----------------------------------
   105|      |    |DS "Pressed BUTTON1!! Hello!!"
      |00005E|005E|  50 72 65 73 73 65 64 20
      |000066|0066|  42 55 54 54 4F 4E 31 21
      |00006E|006E|  21 20 48 65 6C 6C 6F 21
      |000076|0076|  21
------+------+----+----------------------------------
   106|      |    |DB 0x0D, 0x0A, 0
      |000077|0077|  0D 0A 00
------+------+----+----------------------------------
<< label >>
GETKEY ................ 38 ( 0x26 )
MAIN_LOOP ............. 10 ( 0xa )
PUTC .................. 43 ( 0x2b )
PUTC:WAIT_LOOP ........ 45 ( 0x2d )
PUTS .................. 54 ( 0x36 )
PUT_BUTTON0_MESSAGE ... 22 ( 0x16 )
PUT_BUTTON1_MESSAGE ... 30 ( 0x1e )
S_BUTTON0_MESSAGE ..... 63 ( 0x3f )
S_BUTTON1_MESSAGE ..... 94 ( 0x5e )
UART .................. 16 ( 0x10 )
WAIT_KEY_RELEASE ...... 4 ( 0x4 )
