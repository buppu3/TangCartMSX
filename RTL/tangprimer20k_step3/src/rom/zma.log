Z80 Macro Assembler ZMA v1.0.18
=====================================================
Programmed by t.hara

  DEFS is DEFINE STRING (default).
  OUTPUT TYPE: BINARY

<< code >>
LINE# |OFFSET|ADDR|MNEMONIC
======+======+====+==================================
     7|      |    |UART := 0x10
      |      |    |  Global integer symbol [UART] = 16 (0x10)
------+------+----+----------------------------------
     9|      |    |ORG 0x0000
------+------+----+----------------------------------
    11|      |    |DI
      |      |    |  Z80:5cyc R800:2cyc
      |000000|0000|  F3
------+------+----+----------------------------------
    12|      |    |JP START
      |      |    |  Z80:11cyc R800:5cyc
      |000001|0001|  C3 08 00
------+------+----+----------------------------------
    14|      |    |ALIGN 0x0005
      |      |    |  Padding: 1byte(s)
------+------+----+----------------------------------
    15|      |    |BDOS :
      |      |    |  label [BDOS] address: 0x000005
------+------+----+----------------------------------
    16|      |    |JP PUTS
      |      |    |  Z80:11cyc R800:5cyc
      |000005|0005|  C3 2E 00
------+------+----+----------------------------------
    18|      |    |START :
      |      |    |  label [START] address: 0x000008
------+------+----+----------------------------------
    19|      |    |LD SP, 0x4000
      |      |    |  Z80:11cyc R800:3cyc
      |000008|0008|  31 00 40
------+------+----+----------------------------------
    20|      |    |WAIT_KEY :
      |      |    |  label [WAIT_KEY] address: 0x00000b
------+------+----+----------------------------------
    21|      |    |CALL GETKEY
      |      |    |  Z80:18cyc R800:5cyc
      |00000B|000B|  CD 2B 00
------+------+----+----------------------------------
    22|      |    |AND A, 1
      |      |    |  Z80:8cyc R800:2cyc
      |00000E|000E|  E6 01
------+------+----+----------------------------------
    23|      |    |JR Z, WAIT_KEY
      |      |    |  Z80:13cyc/8cyc R800:3cyc/2cyc
      |000010|0010|  28 F9
------+------+----+----------------------------------
    25|      |    |LD DE, S_HELLO
      |      |    |  Z80:11cyc R800:3cyc
      |000012|0012|  11 1B 00
------+------+----+----------------------------------
    26|      |    |CALL PUTS
      |      |    |  Z80:18cyc R800:5cyc
      |000015|0015|  CD 2E 00
------+------+----+----------------------------------
    27|      |    |JP WAIT_KEY
      |      |    |  Z80:11cyc R800:5cyc
      |000018|0018|  C3 0B 00
------+------+----+----------------------------------
    29|      |    |S_HELLO :
      |      |    |  label [S_HELLO] address: 0x00001b
------+------+----+----------------------------------
    30|      |    |DB "Hello, world!", 0x0D, 0x0A, 0
      |00001B|001B|  48 65 6C 6C 6F 2C 20 77
      |000023|0023|  6F 72 6C 64 21 0D 0A 00
------+------+----+----------------------------------
    46|      |    |SCOPE GETKEY
      |      |    |  Enter scope: GETKEY:
------+------+----+----------------------------------
    47|      |    |GETKEY ::
      |      |    |  global label [GETKEY] address: 0x00002b
------+------+----+----------------------------------
    48|      |    |IN A, [ UART ]
      |      |    |  Z80:12cyc R800:10cyc/9cyc
      |00002B|002B|  DB 10
------+------+----+----------------------------------
    49|      |    |RET
      |      |    |  Z80:11cyc R800:5cyc
      |00002D|002D|  C9
------+------+----+----------------------------------
    50|      |    |ENDSCOPE
      |      |    |  Exit scope: GETKEY:
------+------+----+----------------------------------
    61|      |    |SCOPE PUTS
      |      |    |  Enter scope: PUTS:
------+------+----+----------------------------------
    62|      |    |PUTS ::
      |      |    |  global label [PUTS] address: 0x00002e
------+------+----+----------------------------------
    63|      |    |PUSH AF
      |      |    |  Z80:12cyc R800:6cyc
      |00002E|002E|  F5
------+------+----+----------------------------------
    64|      |    |LOOP :
      |      |    |  label [PUTS:LOOP] address: 0x00002f
------+------+----+----------------------------------
    65|      |    |LD A, [ DE ]
      |      |    |  Z80:8cyc R800:4cyc
      |00002F|002F|  1A
------+------+----+----------------------------------
    66|      |    |INC DE
      |      |    |  Z80:7cyc R800:1cyc
      |000030|0030|  13
------+------+----+----------------------------------
    67|      |    |OR A, A
      |      |    |  Z80:5cyc R800:1cyc
      |000031|0031|  B7
------+------+----+----------------------------------
    68|      |    |JR Z, EXIT
      |      |    |  Z80:13cyc/8cyc R800:3cyc/2cyc
      |000032|0032|  28 04
------+------+----+----------------------------------
    69|      |    |OUT [ UART ], A
      |      |    |  Z80:12cyc R800:10cyc/9cyc
      |000034|0034|  D3 10
------+------+----+----------------------------------
    70|      |    |JR LOOP
      |      |    |  Z80:13cyc R800:3cyc
      |000036|0036|  18 F7
------+------+----+----------------------------------
    71|      |    |EXIT :
      |      |    |  label [PUTS:EXIT] address: 0x000038
------+------+----+----------------------------------
    72|      |    |POP AF
      |      |    |  Z80:11cyc R800:5cyc
      |000038|0038|  F1
------+------+----+----------------------------------
    73|      |    |RET
      |      |    |  Z80:11cyc R800:5cyc
      |000039|0039|  C9
------+------+----+----------------------------------
    74|      |    |ENDSCOPE
      |      |    |  Exit scope: PUTS:
------+------+----+----------------------------------
<< label >>
BDOS ........ 5 ( 0x5 )
GETKEY ...... 43 ( 0x2b )
PUTS ........ 46 ( 0x2e )
PUTS:EXIT ... 56 ( 0x38 )
PUTS:LOOP ... 47 ( 0x2f )
START ....... 8 ( 0x8 )
S_HELLO ..... 27 ( 0x1b )
UART ........ 16 ( 0x10 )
WAIT_KEY .... 11 ( 0xb )
